<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>塔罗牌预测系统</title>

    <!-- 引入自定义样式 -->
    <link rel="stylesheet" href="styles/style.css">

    <!-- 引入外部库 (Three.js, MediaPipe, Marked) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

    <!-- Loading 界面 -->
    <div id="loader">
        <div class="spinner"></div>
        <p style="margin-top:20px; color:#666;">初始化命运系统...</p>
        <button id="start-btn">点击开启仪式</button>
    </div>

    <!-- 摄像头视频流 (隐藏，用于分析) -->
    <video id="input_video"></video>

    <!-- 3D 渲染容器 -->
    <div id="canvas-container"></div>

    <!-- UI 交互层 -->
    <div id="ui-layer">
        <div class="status-bar">
            <h1>ARCANA GESTURA</h1>
            <div class="sub-text">手势驱动 · 塔罗预测系统</div>
        </div>

        <!-- 核心引导区 -->
        <div id="guide-overlay">
            <div id="guide-content" class="instruction">
                <span class="gesture-icon">👋</span>
                <h2>举起你的右手</h2>
                <p>让摄像头看见你的手掌以开始</p>
            </div>
            <!-- 选牌进度条 -->
            <div id="progress-container"><div id="progress-bar"></div></div>
        </div>

        <!-- 解牌结果面板 -->
        <div id="result-panel">
            <div id="result-content">
                <h2 style="color:var(--primary); text-align:center; margin-bottom:30px;">命运指引</h2>
                <div class="card-reveal" id="card-reveal-container"></div>
                <div id="ai-text">正在连接宇宙意识</div>
                <div style="text-align:center; margin-top:30px; font-size:12px; color:#555;">
                    握拳 🤛 保持 1.5 秒 可重置仪式
                </div>
            </div>
        </div>

        <!-- API Key 输入区 -->
        <div id="settings-area">
            <input type="password" id="api-key-input" placeholder="输入阿里云 Qwen API Key">
        </div>

        <!-- ... 在 settings-area 之后 ... -->

        <!-- 帮助按钮 -->
        <button id="help-btn">?</button>

        <!-- 帮助模态框 -->
        <div id="help-modal">
            <div class="modal-content">
                <span id="close-help">&times;</span>
                <h2>操作指南</h2>
                <div class="help-item">
                    <span class="icon">👋</span>
                    <div>
                        <h3>浏览卡牌</h3>
                        <p>举起一只手，在摄像头前移动，光标会跟随你的手掌移动。</p>
                    </div>
                </div>
                <div class="help-item">
                    <span class="icon">🤏</span>
                    <div>
                        <h3>选择命运</h3>
                        <p>将光标对准心仪的卡牌，<b>捏合食指与拇指</b>并保持 0.5 秒即可选中。</p>
                    </div>
                </div>
                <div class="help-item">
                    <span class="icon">🤛</span>
                    <div>
                        <h3>重置仪式</h3>
                        <p>在解牌结束后，<b>握拳</b>并保持 1.5 秒，即可重新开始。</p>
                    </div>
                </div>
                <div class="help-item">
                    <span class="icon">⚙️</span>
                    <div>
                        <h3>AI 设置</h3>
                        <p>在左下角输入阿里云 API Key 可获得 AI 详细解读，否则为模拟数据。</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 右下角手势提示 (保持不变或稍微精简) -->
        <div id="gesture-hint">
            <p>🤏 捏合：选牌</p>
            <p>🤛 握拳：重置</p>

        </div>
    </div>

    <!-- 引入核心逻辑脚本 -->
    <script type="module" src="scripts/main.js"></script>
</body>
</html>